[
["index.html", "个人问题集 前言", " 个人问题集 曹洋 2020-02-14 前言 生活和工作中我们会不断遇到新的问题，继而不断寻找解决问题的方法，可以去百度或者谷歌搜索，可以去问技术大拿。相信很多人跟我一样，在下次碰到同样的问题的时候，还是有可能不知道怎么解决，可能还要走以前的老路子。好记性不如烂笔头，把自己碰到的问题记录在这里，以备需要时查看。 问题无关简单或者困难，有用即可。 "],
["r-programming.html", "第1章 R 语言 1.1 R基础 1.2 可视化 1.3 可重复性研究 1.4 rstudio", " 第1章 R 语言 1.1 R基础 根据序列长度进行迭代（循环）的时候，1:seq_along(y)和1:length(y)有什么区别？ 应使用1:seq_along(y)。当length(y) = 0时seq_along(y)返回integer(0)，基于1:seq_along(y)的循环会抛错； 而1:length(y)表示1:0的迭代，可能出现意想不到的结果。参见R for Data Science (Grolemund and Wickham 2019) You might not have seen seq_along() before. It’s a safe version of the familiar 1:length(l), with an important difference: if you have a zero-length vector, seq_along() does the right thing y &lt;- vector(&quot;double&quot;, 0) # 抛错 seq_along(y) ## integer(0) sapply(1:seq_along(y), function(x) x + 1) ## Error in 1:seq_along(y): argument of length 0 # 正常计算 1:length(y) ## [1] 1 0 sapply(1:length(y), function(x) x + 1) ## [1] 2 1 如果我们在~/.Rprofile添加了初始化设置，那么如果当前工作目录中有含有.Rprofile的时候（如在github上fork的别人的项目中含有该文件），就会忽略~/.Rprofile中的设置。 解决方法# ~/.Renviron中设置site profile变量R_PROFILE=~/Rprofile.site，然后把之前.Rprofile的设置拷贝到~/Rprofile.site即可。这是因为R的启动的时候会在读取.Rprofile之前读取~/Rprofile.site中的设置。 设置Alfred快捷打开rstudio的project Preferences &gt; Features &gt; Default Results &gt; Advanced，然后把任何.Rproj文件拖入窗口，参考于此 安装rlang的时候出现错误复制 C:\\R-3.6.0\\library\\00LOCK-rlang\\00new\\rlang\\libs\\x64\\rlang.dll到 C:\\R-3.6.0\\library\\rlang\\libs\\x64\\rlang.dll 时出了问题：Permission denied 因为如果R包如果包含c++/c/Fortran代码（如rlang），如果已经加载了这种包，在对其进行升级或者重装 的时候就会出现类似上述错误。关掉加载这些包的R，才能继续重装或升级。 1.2 可视化 1.2.1 基础图形 par(&quot;pin&quot;), par(&quot;usr&quot;) par(&quot;pin&quot;)表示当前图形的尺寸用英寸表示(width * height)；par(&quot;usr&quot;)表示当前图形的坐标范围c(xmin, xmax, ymin, ymax) 颜色代码的可视化，以便观察颜色 image(1, 1, as.matrix(1), col = &quot;#E64B35&quot;) scales::show_col(&quot;#E64B35&quot;) 1.2.2 ggplot 什么是individal geom 和 collective geom? 基于一行数据进行作图的geom称为individal geom，如geom_point每行数据映射到图形中的一个点；基于多行数据作图的geom称为collective geom, 如geom_bar对多行数据进行统计变换计算其频数，也就是说多行数据映射到图形中的一个bar. 如何正确使用 ggplot aes(group) 见这篇博客 修改连续坐标轴的范围 见这篇博客 坐标轴label移动到图形内部 见此 修改离散坐标的顺序 见这篇博文 添加文本标注 使用Inf或-Inf表征在边界添加文本 # 例子源自https://r4ds.had.co.nz/graphics-for-communication.html library(ggplot2) label &lt;- tibble::tibble( displ = Inf, hwy = Inf, label = &quot;Increasing engine size is \\nrelated to decreasing fuel economy.&quot; ) ggplot(mpg, aes(displ, hwy)) + geom_point() + geom_text(aes(label = label), data = label, vjust = &quot;top&quot;, hjust = &quot;right&quot;) 图形添加边框 设置theme(plot.background = element_rect()) ggplot(mtcars, aes(wt, mpg)) + geom_point() + theme(plot.background = element_rect(color = &quot;black&quot;)) 等高线图geom_contour()自定义levels 手动指定参数breaks(帮助文档中找不到该参数说明)，参考此. ggplot中文字体 见此 ggplot分面添加tag (如A,B, C)，可参考此问题 p &lt;- ggplot(mpg, aes(displ, hwy)) + geom_point() + facet_wrap(vars(class)) egg::tag_facet_outside(p) ## 字符 {#char} 1.2.3 正则表达式 正则表达式字符列表[]用法：[]中的字符匹配字符本身，如[.]匹配.,而不是任意字符，因此可以使用[.]代替\\\\.,一些在[]内有特殊意义的字符除外，如-表示范围，^不包含这些字符，]结束括号，\\在字符串中表示转义。 正则表达式默认是进行贪婪匹配，即匹配最长字符串，在正则表达式后边加?表示最短匹配 # 匹配到两个a，然后删除 sub(&quot;a+&quot;, &quot;&quot;, &quot;aac&quot;) ## [1] &quot;c&quot; # 匹配到一个a，然后删除 sub(&quot;a+?&quot;, &quot;&quot;, &quot;aac&quot;) ## [1] &quot;ac&quot; 表示重复次数的*(任意次)、?(0或1次)、+(一次以上)优先级较高 # b出现一次以上 sub(&quot;ab+&quot;, &quot;&quot;, &quot;ababc&quot;) ## [1] &quot;abc&quot; # ab出现一次以上 sub(&quot;(ab)+&quot;, &quot;&quot;, &quot;ababc&quot;) ## [1] &quot;c&quot; 1.3 可重复性研究 knitr多个代码块的输出折叠到一个pre块中 collapse = TRUE 输出为github的markdown格式 github_document产生github的markdown格式，比如README.Rmd生成README.MD knitr 数据较大时设置缓存 cache =TRUE，对于较大数据可能会抛出错误；这时候设置cache.lazy = FALSE即可，答案在这和这 代码块中的输出多个图形，怎么输出为一副图形？ figure.show默认为asis图形位于产生图形代码后面，多个作图语句就会产生多幅图形，figure.show='hold'就代码块结尾显示所有图形，即一个代码块产生一个图形。 1.3.1 bookdown 章节去除编号 章节后面添加 {-} 汉话：章节标题汉化，https://bookdown.org/yihui/bookdown/internationalization.html。配置文件`_bookdown.yml` language: ui: chapter_name: [&quot;第&quot;, &quot;章&quot;] The chapter_name field can be either a character string to be prepended to chapter numbers in chapter titles (e.g., ‘CHAPTER’), or an R function that takes the chapter number as the input and returns a string as the new chapter number (e.g., !expr function(i) paste('Chapter', i)). If it is a character vector of length 2, the chapter title prefix will be paste0(chapter_name[1], i, chapter_name[2]), where i is the chapter number. 出现错误Error in split_chapters(output, gitbook_page, number_sections, split_by, :Automatically generated filenames contain duplicated ones: -, - 表示由split_by自动生成章节标题出现重复标题而出现错误。中文标题会出现这种错误，章节标题手动添加{$ID}即可，参见这和这 1.3.2 tinytex pkgdown编译jss文档的时候出现，! LaTeX Error: Fileae.sty’not found.` 说明缺少ae包， tlmgr_search(&#39;ae.sty&#39;) # 提示remote repository 版本太旧，2018 &lt; 2019,这时候需要升级texlive tinytex::reinstall_tinytex() tlmgr_search(&#39;ae.sty&#39;) # ae: # texmf-dist/tex/latex/ae/ae.sty #安装即可 tlmgr_install(&#39;ae&#39;) 1.4 rstudio ubuntu rstudio不支持中文 这是因为 rstudio 自带的QT5不支持 fctix (搜狗拼音就是依赖fctix)，设置 rstuido 使用系统自带的QT即可，步骤如下(参考此): # 1.系统自带 qt 的 fctix 插件链接到 rstudio 相应文件夹下 sudo ln -s /usr/lib/$(dpkg-architecture -qDEB_BUILD_MULTIARCH)/qt5/plugins/platforminputcontexts/libfcitxplatforminputcontextplugin.so /usr/lib/rstudio/plugins/platforminputcontexts # 2. 修改rstudio qt配置文件/usr/lib/rstudio/bin/qt.conf,添加刚才链接的路径 Prefix = /usr/lib/rstudio/ References "],
["git-github.html", "第2章 git 和 github", " 第2章 git 和 github 修改commit的message # 想要修改的commit的父提交hash值 git rebase -i &lt;commit_hash&gt; # 修改要修改message行首的pick为r(reword)，然后修改该条message，保存退出即可 # 如果同时修改github仓库的commit，强制push即可 git push -f 显示某一次提交中某个文件的变化 git log &lt;commit_hash&gt; &lt;file_name&gt; 删除远程仓库(如github)的错误提交，在本地处理好之后，如删除错误提交，然后强制push到远程进行修改 git push --force 删除远程分支 git push origin --delete &lt;remote_branch&gt; 修改本地仓库关联的远程仓库，提交修改至另一个远程仓库 git remote set-url origin https://github.com/yiluheihei/beginr.git 删除本地 untracted files # 查看哪些文件将被删除 git clean -n # 删除文件 git clean -f # 删除文件和文件夹 git clean -f -d # 删除 ignore 的文件 git clean -f -X # 删除 ignore 和非 ignore 文件 git clean -f -x unstage git add的文件 git reset HEAD &lt;file&gt; 忽略本地文件修改 # 若文件状态为unstage git checkout &lt;file&gt; # 若文件已经通过`git add` stage，首先文件状态修改为unstage git reset HEAD &lt;file&gt; git checkout &lt;file&gt; 拉取远程分支时保持本地修改 # 备份当前工作区内容，从最近一次提交中读取内容 git stash # 拉取远程分支内容 git pull &lt;remote branch&gt; # 从stash中读取备份的内容 git stash pop windows下命令行git中文显示乱码 设置环境变量LESSCHARSET=utf-8 "],
["bioinfo.html", "第3章 生物信息 3.1 微生物组 3.2 scRNA-seq", " 第3章 生物信息 3.1 微生物组 mac如何安装 lefse ？ 通过homebrew安装lefse已经不再维护brew install biobakery/biobakery/lefse;采用conda安装(目前biobakery下的软件都用conda源安装) conda config --add channels biobakery conda install -c biobakery lefse 本地测试qiime1脚本时，安装完依赖后，运行脚本，pycharm 导入matplotlib.pyplot出现错误from urllib.parse import urlencode ImportError: No module named parse pycharm中设置 Preferences -&gt; Tools -&gt; Python Scientific取消勾选Show plots in tool window，答案见此 3.2 scRNA-seq 安装velocyto.R. clang: error: unsupported option '-fopenmp' mac下clang不支持openmp，解决方法参考此处，安装支持openmp的clang. 然后修改配置文件，在~/.R/Makevars(配置compliers和library)，添加 CC=/usr/local/clang7/bin/clang SHLIB_CXXLD=/usr/local/clang7/bin/clang++ CXX= /usr/local/clang7/bin/clang++ -Wall CXX1X= /usr/local/clang7/bin/clang++ CXX98= /usr/local/clang7/bin/clang++ CXX11= /usr/local/clang7/bin/clang++ CXX14= /usr/local/clang7/bin/clang++ CXX17= /usr/local/clang7/bin/clang++ LDFLAGS=-L/usr/local/clang7/lib library not found for -lboost_filesystem 安装 boost brew install boost library not found for -lgfortran gfortran包含在gcc中，但是电脑中gcc是通过homebrew安装，原始配置文件/Library/Frameworks/R.framework/Resources/etc/Makeconf中并没有更新库的地址，在~/.R/Makevars中手动添加即可 # 通过homebrew安装的gcc地址 FLIBS = -L/usr/local/lib/gcc/8/gcc/x86_64-apple-darwin17.5.0/8.1.0 -L/usr/local/lib/gcc/8 -lgfortran -lquadmath -lm # Library/Frameworks/R.framework/Resources/etc/Makeconf中的原始配置 # FLIBS = -L/usr/local/gfortran/lib/gcc/x86_64-apple-darwin15/6.1.0 -L/usr/local/gfortran/lib -lgfortran -lquadmath -lm 安装velocyto.py mac 在 pip 安装的时候gcc编译出现错误，建议使用conda安装conda install velocyto.py "],
["office-app.html", "第4章 办公软件 4.1 PPT 4.2 EXCEL 4.3 PS CC", " 第4章 办公软件 4.1 PPT mac下powerpoint从自动保存文件中恢复文件 以防在某些特殊情况下（如电脑死机）的时候，丢失没有保存的内容，通过菜单栏powerpoint -&gt; 偏好设置 -&gt; 保存 -&gt; 勾选保存自动恢复信息，选择保存间隔（如5分钟)，这样就会在每隔一定 时间后对文件进行保存。默认情况下，当我们再打开ppt的时候会弹出恢复文件选项，选择最近时间的文件进行恢 即可得到修改后的文件。 但是，有时候不会自动弹出恢复选项。这时候我们到自动保存文件夹位置为/Users/(username)/Library/Containers/com.Microsoft.Powerpoint/Data/Library/Preferences/AutoRecovery下根据保存时间找到自动保存的文件，把文件扩展名改成.ppt恢复对未保存的修改。 4.2 EXCEL 拖动公式时某个数值保持不变，A1/B1在向下拖动时变为A2/B2，如何保持A1不变 $表示绝对引用，可设置公式参数不变，如$A$1/B1中保持$A$1不变。 4.3 PS CC 无法使用修补工具，因为它不用于索引颜色图像 需转换为RGB图像，点击菜单栏“图像 -&gt; 模式 -&gt; RGB” 去除图片中文字 使用修补工具，具体步骤:选择修补工具，公共栏中选择修补项为源，关闭透明选项，然后用修补工具框选文字，拖动到无文字区域中与文字周围图案相似的位置，修补工具就会自动匹配目标位置的颜色。 "],
["mac-os.html", "第5章 Mac OS 5.1 homebrew 5.2 应用程序 5.3 conda", " 第5章 Mac OS 5.1 homebrew homebrew 安装程序出现以下错误 Error: An unexpected error occurred during the `brew link` step The formula built, but is not symlinked into /usr/local Permission denied @ dir_s_mkdir - /usr/local/Frameworks Error: Permission denied @ dir_s_mkdir - /usr/local/Frameworks 是由于用户没有修改$(brew --prefix)/*即/usr/local权限，修改权限即可sudo chown -R $(whoami) $(brew --prefix)/* 5.2 应用程序 打开xxx.app文件时，出现app已损坏，打不开，你应该将它移到废纸篓 系统默认不允许用户自行下载安装应用程序。在终端运行sudo sptcl --master-disable运行即可。打开系统偏好设置 -&gt; 安全性与隐私 -&gt; 允许从以下位置下载的应用就变成了任何来源，双击即可打开app。 5.2.1 Alfred Mac效率神器，快速搜索并打开app、文件，可替代spotlight 设置激活快捷键cmd + space 需取消splotlight快捷键，然后在设置面板里设置即可，详见此 搜索不到文件 可能是mac系统索引问题，设置面板选择建立mac os的源文件“Rebuild macOS Metadata”，见此 5.3 conda macOS 10.14 Mojave,conda安装包的时候设计到qt就出现错误，如conda-forge::qt-5.9.7-h93ee506_1'. PermissionError(1, 'Operation not permitted') 解决方法在此 # for base: cd ~/anaconda3/bin ls *.app rm -rf *.app conda update --all --yes # for some_env: cd ~/anaconda3/envs/some_env/bin ls *.app rm -rf *.app conda update -n some_env --all --yes "],
["linux.html", "第6章 linux", " 第6章 linux ubuntu 添加 aliyun 源 # 备份原有文件 mv /etc/apt/sources.list /etc/apt/sources.list.backup # 新建文件，添加源 touch /etc/apt/sources.list deb-src http://archive.ubuntu.com/ubuntu xenial main restricted # Added by software-properties deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe # Added by software-properties deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe # Added by software-properties deb http://mirrors.aliyun.com/ubuntu/ xenial universe deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse # Added by software-properties deb http://archive.canonical.com/ubuntu xenial partner deb-src http://archive.canonical.com/ubuntu xenial partner deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe # Added by software-properties deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe deb http://mirr.iyun.com/ubuntu/ xenial-security multiverse ubuntu 安裝 R 参考https://cran.r-project.org/bin/linux/ubuntu/README.html # 添加源 deb https://cloud.r-project.org/bin/linux/ubuntu xenial-cran35/ # 密匙 sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9 sudo apt-get update sudo apt-get install r-base r-base-dev 虚拟机安装ubuntu后切换工作区快捷键ctrl + alt + 方向键，上下方向键可正常切换，而左右方向键切换不了 因为虚拟机中ctrl + alt + 左右方向键在VMware中用于切换全屏虚拟机，修改VMware切换全屏 虚拟机快捷键即可，如ctrl + shit + 左右方向键 虚拟机ubuntu非正常关机后，再打开黑屏 方法参考这里, 重置LSP netsh winsock reset "],
["tools.html", "第7章 tools 7.1 conda", " 第7章 tools 7.1 conda 设置清华源，参考此 channels: - defaults show_channel_urls: true channel_alias: https://mirrors.tuna.tsinghua.edu.cn/anaconda default_channels: - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2 custom_channels: conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud "]
]
